"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[232],{7232:(je,S,a)=>{a.r(S),a.d(S,{UserModule:()=>Qe});var g=a(6895),p=a(8988),U=a(319),c=a(4006),h=a(2676),e=a(4650),f=a(1584),A=a(7185),E=a(690),v=a(6107),b=a(9785),C=a(8796),Z=a(9383);function I(t,i){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADD_USER")))}function F(t,i){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"EDIT_USER")))}function q(t,i){1&t&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME_IS_REQUIRED")," "))}function O(t,i){1&t&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME_IS_REQUIRED")," "))}function M(t,i){1&t&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_IS_REQUIRED")," "))}function Y(t,i){1&t&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL_IS_REQUIRED")," "))}function D(t,i){1&t&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function k(t,i){1&t&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function J(t,i){1&t&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function Q(t,i){if(1&t&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",26),e.YNc(5,k,3,3,"div",15),e.YNc(6,J,3,3,"div",15),e.qZA()),2&t){const s=e.oxw();let o;e.xp6(2),e.Oqu(e.lcZ(3,3,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",s.userForm.get("password").touched&&s.userForm.get("password").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.userForm.get("password").touched&&(null==(o=s.userForm.get("password"))?null:o.hasError("minlength")))}}function j(t,i){1&t&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function y(t,i){1&t&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}function $(t,i){if(1&t&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",27),e.YNc(5,j,3,3,"div",15),e.YNc(6,y,3,3,"div",15),e.qZA()),2&t){const s=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"CONFIRM_PASSWORD")),e.xp6(3),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.get("confirmPassword").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.get("confirmPassword").touched&&s.userForm.hasError("notSame"))}}function H(t,i){if(1&t&&(e.TgZ(0,"ng-option",28),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s.name)}}function V(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(s);const n=e.oxw(2);return e.KtG(n.saveUser())}),e._UZ(1,"i",31),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}function B(t,i){1&t&&(e.ynx(0),e.YNc(1,V,4,3,"button",29),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","USER_EDIT_USER"))}function W(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(s);const n=e.oxw(2);return e.KtG(n.saveUser())}),e._UZ(1,"i",31),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}function G(t,i){1&t&&(e.ynx(0),e.YNc(1,W,4,3,"button",29),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","USER_CREATE_USER"))}const K=function(){return["/users"]};let R=(()=>{class t extends h.H{constructor(s,o,n,r,l,m,u){super(),this.fb=s,this.router=o,this.activeRoute=n,this.userService=r,this.toastrService=l,this.commonService=m,this.translationService=u,this.isEditMode=!1}ngOnInit(){this.createUserForm(),this.sub$.sink=this.activeRoute.data.subscribe(s=>{s.user?(this.isEditMode=!0,this.userForm.patchValue(s.user),this.user=s.user,this.userForm.get("email").disable()):(this.userForm.get("password").setValidators([c.kI.required,c.kI.minLength(6)]),this.userForm.get("confirmPassword").setValidators([c.kI.required]))}),this.getRoles()}createUserForm(){this.userForm=this.fb.group({id:[""],firstName:["",[c.kI.required]],lastName:["",[c.kI.required]],email:["",[c.kI.required,c.kI.email]],phoneNumber:["",[c.kI.required]],password:[""],confirmPassword:[""],selectedRoles:[]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}saveUser(){if(this.userForm.valid){const s=this.createBuildObject();this.sub$.sink=this.isEditMode?this.userService.updateUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])}):this.userService.addUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_CREATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}else this.toastrService.error(this.translationService.getValue("PLEASE_ENTER_PROPER_DATA"))}createBuildObject(){return{id:this.userForm.get("id").value,firstName:this.userForm.get("firstName").value,lastName:this.userForm.get("lastName").value,email:this.userForm.get("email").value,phoneNumber:this.userForm.get("phoneNumber").value,password:this.userForm.get("password").value,userName:this.userForm.get("email").value,roleIds:this.getSelectedRoles()}}getSelectedRoles(){return(this.userForm.get("selectedRoles").value??[]).map(o=>o.id)}getRoles(){this.sub$.sink=this.commonService.getRolesForDropdown().subscribe(s=>{if(this.roleList=s,this.isEditMode){const o=this.user.userRoles.map(r=>r.roleId),n=this.roleList.filter(r=>o.indexOf(r.id)>-1);this.userForm.get("selectedRoles").setValue(n)}})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(c.QS),e.Y36(p.F0),e.Y36(p.gz),e.Y36(f.K),e.Y36(A._W),e.Y36(E.v),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manage-user"]],features:[e.qOj],decls:55,vars:34,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[4,"ngIf"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[3,"formGroup"],[1,"col-md-6"],[1,"form-label"],["formControlName","firstName","type","text",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","lastName","type","text",1,"form-control"],["formControlName","phoneNumber","type","text",1,"form-control"],["formControlName","email","type","email",1,"form-control"],["class","col-md-6",4,"ngIf"],["formControlName","selectedRoles",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],[1,"m-t-10","col-md-12"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"fas","fa-times-circle"],[1,"text-danger"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],[3,"value"],["class","btn btn-success btn-sm m-r-10","cdkFocusInitial","",3,"click",4,"hasClaim"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],[1,"fas","fa-save"]],template:function(s,o){if(1&s&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e.YNc(7,I,3,3,"h2",7),e.YNc(8,F,3,3,"h2",7),e.qZA()()()()(),e.TgZ(9,"div",4)(10,"div",8)(11,"div",9)(12,"div",10)(13,"form",11)(14,"div",4)(15,"div",12)(16,"label",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",14),e.YNc(20,q,3,3,"div",15),e.qZA(),e.TgZ(21,"div",12)(22,"label",13),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",16),e.YNc(26,O,3,3,"div",15),e.qZA(),e.TgZ(27,"div",12)(28,"label",13),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"input",17),e.YNc(32,M,3,3,"div",15),e.qZA(),e.TgZ(33,"div",12)(34,"label",13),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"input",18),e.YNc(38,Y,3,3,"div",15),e.YNc(39,D,3,3,"div",15),e.qZA(),e.YNc(40,Q,7,5,"div",19),e.YNc(41,$,7,5,"div",19),e.TgZ(42,"div",12)(43,"label",13),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"ng-select",20),e.YNc(47,H,2,2,"ng-option",21),e.qZA()(),e.TgZ(48,"div",22),e.YNc(49,B,2,1,"ng-container",7),e.YNc(50,G,2,1,"ng-container",7),e.TgZ(51,"button",23),e._UZ(52,"i",24),e._uU(53),e.ALo(54,"translate"),e.qZA()()()()()()()()()()),2&s){let n,r,l,m,u;e.xp6(7),e.Q6J("ngIf",!o.isEditMode),e.xp6(1),e.Q6J("ngIf",o.isEditMode),e.xp6(5),e.Q6J("formGroup",o.userForm),e.xp6(4),e.Oqu(e.lcZ(18,21,"FIRST_NAME")),e.xp6(3),e.Q6J("ngIf",(null==(n=o.userForm.get("firstName"))?null:n.touched)&&(null==(n=o.userForm.get("firstName"))?null:n.hasError("required"))),e.xp6(3),e.Oqu(e.lcZ(24,23,"LAST_NAME")),e.xp6(3),e.Q6J("ngIf",o.userForm.get("lastName").touched&&(null==(r=o.userForm.get("lastName"))?null:r.hasError("required"))),e.xp6(3),e.Oqu(e.lcZ(30,25,"MOBILE_NUMBER")),e.xp6(3),e.Q6J("ngIf",o.userForm.get("phoneNumber").touched&&(null==(l=o.userForm.get("phoneNumber"))?null:l.hasError("required"))),e.xp6(3),e.Oqu(e.lcZ(36,27,"EMAIL")),e.xp6(3),e.Q6J("ngIf",o.userForm.get("email").touched&&(null==(m=o.userForm.get("email"))?null:m.hasError("required"))),e.xp6(1),e.Q6J("ngIf",o.userForm.get("email").touched&&(null==(u=o.userForm.get("email"))?null:u.hasError("email"))),e.xp6(1),e.Q6J("ngIf",!o.isEditMode),e.xp6(1),e.Q6J("ngIf",!o.isEditMode),e.xp6(3),e.Oqu(e.lcZ(45,29,"ROLES")),e.xp6(2),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngForOf",o.roleList),e.xp6(2),e.Q6J("ngIf",o.isEditMode),e.xp6(1),e.Q6J("ngIf",!o.isEditMode),e.xp6(1),e.Q6J("routerLink",e.DdM(33,K)),e.xp6(2),e.hij(" ",e.lcZ(54,31,"CANCEL"),"")}},dependencies:[g.sg,g.O5,p.rH,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,b.d,C.w9,C.jq,Z.X$],styles:[".example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}"]}),t})(),x=(()=>{class t{constructor(s){this.userService=s}resolve(s,o){const n=s.paramMap.get("id");return this.userService.getUser(n)}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(f.K))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var _=a(5412);function X(t,i){1&t&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function z(t,i){1&t&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function ee(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,X,3,3,"div",11),e.YNc(2,z,3,3,"div",11),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.minlength)}}function te(t,i){1&t&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function se(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,te,3,3,"div",11),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("confirmPassword").errors?null:s.resetPasswordForm.get("confirmPassword").errors.required)}}function oe(t,i){1&t&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}let ie=(()=>{class t extends h.H{constructor(s,o,n,r,l,m){super(),this.userService=s,this.fb=o,this.dialogRef=n,this.data=r,this.toastrService=l,this.translationService=m}ngOnInit(){this.createResetPasswordForm(),this.resetPasswordForm.get("email").setValue(this.data.userName)}createResetPasswordForm(){this.resetPasswordForm=this.fb.group({email:[{value:"",disabled:!0}],password:["",[c.kI.required,c.kI.minLength(6)]],confirmPassword:["",[c.kI.required]]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}resetPassword(){this.resetPasswordForm.valid?this.sub$.sink=this.userService.resetPassword(this.createBuildObject()).subscribe(s=>{this.toastrService.success(this.translationService.getValue("SUCCESSFULLY_RESET_PASSWORD")),this.dialogRef.close()}):this.resetPasswordForm.markAllAsTouched()}createBuildObject(){return{email:this.resetPasswordForm.get("email").value,password:this.resetPasswordForm.get("password").value,userName:this.resetPasswordForm.get("email").value}}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(f.K),e.Y36(c.QS),e.Y36(_.so),e.Y36(_.WI),e.Y36(A._W),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],features:[e.qOj],decls:33,vars:22,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"col-md-12","m-b-10"],[1,"form-label"],["formControlName","email","type","email",1,"form-control"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],[4,"ngIf"],[1,"col-md-12"],[1,"form-group"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],["class","text-danger",4,"ngIf"],["mat-dialog-actions",""],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],[1,"fas","fa-save"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-times-circle"],[1,"text-danger"]],template:function(s,o){1&s&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"form",2)(5,"div",3)(6,"label",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"div",3)(11,"label",4),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",6),e.YNc(15,ee,3,2,"div",7),e.qZA(),e.TgZ(16,"div",8)(17,"div",9)(18,"label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"input",10),e.YNc(22,se,2,1,"div",7),e.YNc(23,oe,3,3,"div",11),e.qZA()()()(),e.TgZ(24,"div",12)(25,"button",13),e.NdJ("click",function(){return o.resetPassword()}),e._UZ(26,"i",14),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"button",15),e.NdJ("click",function(){return o.onNoClick()}),e._UZ(30,"i",16),e._uU(31),e.ALo(32,"translate"),e.qZA()()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,10,"RESET_PASSWORD")),e.xp6(3),e.Q6J("formGroup",o.resetPasswordForm),e.xp6(3),e.Oqu(e.lcZ(8,12,"EMAIL")),e.xp6(5),e.Oqu(e.lcZ(13,14,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",o.resetPasswordForm.get("password").touched&&o.resetPasswordForm.get("password").errors),e.xp6(4),e.Oqu(e.lcZ(20,16,"CONFIRM_PASSWORD")),e.xp6(3),e.Q6J("ngIf",o.resetPasswordForm.get("confirmPassword").touched&&o.resetPasswordForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",o.resetPasswordForm.get("confirmPassword").touched&&o.resetPasswordForm.hasError("notSame")),e.xp6(4),e.hij(" ",e.lcZ(28,18,"SAVE"),""),e.xp6(4),e.hij(" ",e.lcZ(32,20,"CANCEL"),""))},dependencies:[g.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,_.uh,_.xY,_.H8,Z.X$]}),t})();var ne=a(5485),d=a(671),L=a(1572),N=a(4859),P=a(7392),T=a(8255),re=a(1676);const ae=function(){return["/users/manage"]};function ce(t,i){1&t&&(e.TgZ(0,"div",5)(1,"ul",22)(2,"li",23)(3,"a",24),e._UZ(4,"app-feather-icons",25),e.TgZ(5,"span",26),e._uU(6),e.ALo(7,"translate"),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(7,ae)),e.xp6(1),e.Tol("btn-success"),e.Q6J("icon","Plus"),e.xp6(2),e.hij(" ",e.lcZ(7,5,"ADD_USER"),""))}function le(t,i){1&t&&(e.TgZ(0,"th",27)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ACTION")," "))}function me(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(s);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.editUser(n.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"EDIT")," "))}function ue(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(s);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.deleteUser(n))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"DELETE")," "))}function de(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(s);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.userPermission(n.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"people"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"PERMISSION")," "))}function pe(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(s);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.resetPassword(n))}),e.TgZ(1,"mat-icon"),e._uU(2,"key"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"RESET_PASSWORD")," "))}function _e(t,i){if(1&t&&(e.TgZ(0,"td",28)(1,"button",29)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,30),e.YNc(6,me,5,3,"button",31),e.YNc(7,ue,5,3,"button",32),e.YNc(8,de,5,3,"button",32),e.YNc(9,pe,5,3,"button",32),e.qZA()()),2&t){const s=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",s),e.xp6(5),e.Q6J("hasClaim","USER_EDIT_USER"),e.xp6(1),e.Q6J("hasClaim","USER_DELETE_USER"),e.xp6(1),e.Q6J("hasClaim","USER_ASSIGN_PERMISSION"),e.xp6(1),e.Q6J("hasClaim","USER_RESET_PASSWORD")}}function ge(t,i){1&t&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL")," "))}function he(t,i){if(1&t&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.email," ")}}function fe(t,i){1&t&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME")," "))}function ve(t,i){if(1&t&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.firstName," ")}}function Ue(t,i){1&t&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME")," "))}function Ae(t,i){if(1&t&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.lastName," ")}}function Ze(t,i){1&t&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_NUMBER")," "))}function Te(t,i){if(1&t&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.phoneNumber," ")}}function Ce(t,i){1&t&&e._UZ(0,"tr",34)}function xe(t,i){1&t&&e._UZ(0,"tr",35)}function Se(t,i){1&t&&e._UZ(0,"mat-spinner")}function Ee(t,i){if(1&t&&(e.TgZ(0,"div",36),e.YNc(1,Se,1,0,"mat-spinner",37),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.isLoadingResults)}}let be=(()=>{class t extends h.H{constructor(s,o,n,r,l,m,u){super(),this.userService=s,this.toastrService=o,this.commonService=n,this.commonDialogService=r,this.dialog=l,this.router=m,this.translationService=u,this.users=[],this.displayedColumns=["action","email","firstName","lastName","phoneNumber"],this.isLoadingResults=!1}ngOnInit(){this.getUsers()}deleteUser(s){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE"),s.userName).subscribe(o=>{o&&(this.sub$.sink=this.userService.deleteUser(s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_DELETED_SUCCESSFULLY")),this.getUsers()}))})}getUsers(){this.isLoadingResults=!0,this.sub$.sink=this.commonService.getUsers().subscribe(s=>{this.isLoadingResults=!1,this.users=s},s=>{s.messages.forEach(o=>{this.toastrService.error(o),this.isLoadingResults=!1})})}resetPassword(s){this.dialog.open(ie,{width:"350px",data:Object.assign({},s)})}editUser(s){this.router.navigate(["/users/manage",s])}userPermission(s){this.router.navigate(["/users/permission",s])}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(f.K),e.Y36(A._W),e.Y36(E.v),e.Y36(ne.V),e.Y36(_.uw),e.Y36(p.F0),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-list"]],features:[e.qOj],decls:34,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],["class","col-6",4,"hasClaim"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body","table-responsive"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","phoneNumber"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","loading-shade",4,"ngIf"],[1,"breadcrumb-list"],[1,"breadcrumb-item","bcrumb-1"],[1,"btn","btn-outline-success","btn-sm",3,"routerLink"],[3,"icon"],[1,"d-none","d-sm-inline"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-header-row",""],["mat-row",""],[1,"loading-shade"],[4,"ngIf"]],template:function(s,o){1&s&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.YNc(10,ce,8,8,"div",7),e.qZA()()(),e.TgZ(11,"div",4)(12,"div",8)(13,"div",9)(14,"div",10)(15,"table",11),e.ynx(16,12),e.YNc(17,le,4,3,"th",13),e.YNc(18,_e,10,5,"td",14),e.BQk(),e.ynx(19,15),e.YNc(20,ge,3,3,"th",13),e.YNc(21,he,2,1,"td",14),e.BQk(),e.ynx(22,16),e.YNc(23,fe,3,3,"th",13),e.YNc(24,ve,2,1,"td",14),e.BQk(),e.ynx(25,17),e.YNc(26,Ue,3,3,"th",13),e.YNc(27,Ae,2,1,"td",14),e.BQk(),e.ynx(28,18),e.YNc(29,Ze,3,3,"th",13),e.YNc(30,Te,2,1,"td",14),e.BQk(),e.YNc(31,Ce,1,0,"tr",19),e.YNc(32,xe,1,0,"tr",20),e.qZA()()()()()()(),e.YNc(33,Ee,2,1,"div",21)),2&s&&(e.xp6(8),e.Oqu(e.lcZ(9,7,"USERS")),e.xp6(2),e.Q6J("hasClaim","USER_CREATE_USER"),e.xp6(5),e.Q6J("dataSource",o.users),e.xp6(16),e.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isLoadingResults))},dependencies:[g.O5,p.rH,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,L.Ou,N.RK,P.Hw,T.VK,T.OP,T.p6,re.A,b.d,Z.X$]}),t})();var Re=a(4128),Le=a(8853),Ne=a(2852),w=a(6709);function Pe(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",25)(1,"mat-checkbox",26),e.NdJ("change",function(n){const l=e.CHM(s).$implicit,m=e.oxw().$implicit,u=e.oxw();return e.KtG(u.onPermissionChange(n,m,l))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&t){const s=i.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("checked",o.checkPermission(s.id)),e.xp6(1),e.hij(" ",e.lcZ(3,2,s.name.replaceAll(" ","_").toUpperCase())," ")}}function we(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"mat-checkbox",14),e.NdJ("change",function(n){const l=e.CHM(s).$implicit,m=e.oxw();return e.KtG(m.onPageSelect(n,l))}),e.TgZ(3,"b"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",23),e.YNc(7,Pe,4,4,"div",24),e.qZA()()}if(2&t){const s=i.$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,2,s.name.replaceAll(" ","_").toUpperCase()),""),e.xp6(3),e.Q6J("ngForOf",s.pageActions)}}const Ie=function(){return["/users"]};let Fe=(()=>{class t extends h.H{constructor(s){super(),this.translationService=s,this.manageUserClaimAction=new e.vpe,this.step=0}checkPermission(s){return!!this.user.userClaims.find(n=>n.actionId===s)}onPermissionChange(s,o,n){if(s.checked)this.user.userClaims.push({userId:this.user.id,claimType:n.code,claimValue:"",actionId:n.id});else{const r=this.user.userClaims.find(m=>m.actionId===n.id),l=this.user.userClaims.indexOf(r,0);l>-1&&this.user.userClaims.splice(l,1)}}onPageSelect(s,o){if(s.checked)o.pageActions.forEach(n=>{this.checkPermission(n.id)||this.user.userClaims.push({userId:this.user.id,claimType:n.code,claimValue:"",actionId:n.id})});else{const n=o.pageActions?.map(r=>r.id);this.user.userClaims=this.user.userClaims.filter(r=>n.indexOf(r.actionId)<0)}}saveUserClaim(){this.manageUserClaimAction.emit(this.user)}selecetAll(s){s.checked?this.pages.forEach(o=>{o.pageActions.forEach(n=>{this.checkPermission(n.id)||this.user.userClaims.push({userId:this.user.id,claimType:n.code,claimValue:"",actionId:n.id})})}):this.user.userClaims=[]}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission-presentation"]],inputs:{pages:"pages",user:"user"},outputs:{manageUserClaimAction:"manageUserClaimAction"},features:[e.qOj],decls:37,vars:20,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"text-info"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[1,"row","margin-2"],[1,"col-sm-12"],[1,"widget-title"],["color","primary",3,"change"],["fxLayout","row wrap",4,"ngFor","ngForOf"],[1,"col-sm-12","mt-2"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],[1,"fas","fa-save"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"fas","fa-times-circle"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.sm","100"],[1,"row","m-l-15"],["class","col-sm-3 row",4,"ngFor","ngForOf"],[1,"col-sm-3","row"],["color","primary",3,"checked","change"]],template:function(s,o){1&s&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"span",7),e._uU(11),e.qZA()()()()()()(),e.TgZ(12,"div",4)(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"h4",13),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-checkbox",14),e.NdJ("change",function(r){return o.selecetAll(r)}),e._uU(22),e.ALo(23,"translate"),e.qZA()()(),e.TgZ(24,"div",4)(25,"div",12),e.YNc(26,we,8,4,"div",15),e.qZA()(),e.TgZ(27,"div",4)(28,"div",16)(29,"button",17),e.NdJ("click",function(){return o.saveUserClaim()}),e._UZ(30,"i",18),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"button",19),e._UZ(34,"i",20),e._uU(35),e.ALo(36,"translate"),e.qZA()()()()()()()()()),2&s&&(e.xp6(8),e.hij("",e.lcZ(9,9,"USER_PAGE_PERMISSION_TO")," : "),e.xp6(3),e.AsE("",null==o.user?null:o.user.firstName," ",null==o.user?null:o.user.lastName,""),e.xp6(8),e.Oqu(e.lcZ(20,11,"PERMISSION")),e.xp6(3),e.hij(" ",e.lcZ(23,13,"SELECT_ALL")," "),e.xp6(4),e.Q6J("ngForOf",o.pages),e.xp6(5),e.hij(" ",e.lcZ(32,15,"SAVE")," "),e.xp6(2),e.Q6J("routerLink",e.DdM(19,Ie)),e.xp6(2),e.hij(" ",e.lcZ(36,17,"CANCEL")," "))},dependencies:[g.sg,p.rH,w.oG,Z.X$]}),t})();const Oe=[{path:"",component:be,data:{claimType:"USER_VIEW_USERS"},canActivate:[U.a]},{path:"manage/:id",component:R,resolve:{user:x},data:{claimType:"USER_EDIT_USER"},canActivate:[U.a]},{path:"manage",component:R,data:{claimType:"USER_CREATE_USER"},canActivate:[U.a]},{path:"permission/:id",component:(()=>{class t extends h.H{constructor(s,o,n,r,l,m,u){super(),this.activeRoute=s,this.router=o,this.toastrService=n,this.pageService=r,this.actionService=l,this.userService=m,this.translationService=u}ngOnInit(){this.sub$.sink=this.activeRoute.data.subscribe(n=>{this.user=n.user});const s=this.actionService.getAll(),o=this.pageService.getAll();(0,Re.D)({getActionRequest:s,getPageRequest:o}).subscribe(n=>{this.pages=n.getPageRequest,this.pages=this.pages.map(r=>{const l=n.getActionRequest.filter(u=>u.pageId==r.id);return Object.assign({},r,{pageActions:l})})})}manageUserClaimAction(s){this.sub$.sink=this.userService.updateUserClaim(s.userClaims,s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_PERMISSION_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])},o=>{this.toastrService.error(o.error.message)})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(A._W),e.Y36(Le.P),e.Y36(Ne.c),e.Y36(f.K),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission"]],features:[e.qOj],decls:1,vars:2,consts:[[3,"pages","user","manageUserClaimAction"]],template:function(s,o){1&s&&(e.TgZ(0,"app-user-permission-presentation",0),e.NdJ("manageUserClaimAction",function(r){return o.manageUserClaimAction(r)}),e.qZA()),2&s&&e.Q6J("pages",o.pages)("user",o.user)},dependencies:[Fe]}),t})(),resolve:{user:x},data:{claimType:"USER_ASSIGN_PERMISSION"},canActivate:[U.a]}];let Me=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(Oe),p.Bz]}),t})();var Ye=a(3417),De=a(7084),ke=a(455),Je=a(6482);let Qe=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[x],imports:[g.ez,Me,c.u5,c.UX,d.p0,L.Cq,_.Is,ke.rP,Ye.m,T.Tx,N.ot,De.To,w.p9,P.Ps,Je.u,C.A0]}),t})()}}]);